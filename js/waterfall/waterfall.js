function waterfall(e){function t(e,t){var n=window.getComputedStyle(t);return parseFloat(n["margin"+e])||0}function n(e){return e+"px"}function o(e){return parseFloat(e.style.left)}function l(e){return e.clientWidth}function a(e){return function(e){return parseFloat(e.style.top)}(e)+function(e){return e.clientHeight}(e)+t("Bottom",e)}function r(e){return o(e)+l(e)+t("Right",e)}function i(e){e=e.sort((function(e,t){return a(e)===a(t)?o(t)-o(e):a(t)-a(e)}))}function s(t){l(e)!=g&&(t.target.removeEventListener(t.type,arguments.callee),waterfall(e))}"string"==typeof e&&(e=document.querySelector(e));var u=[].map.call(e.children,(function(e){return e.style.position="absolute",e}));e.style.position="relative";var c=[];u.length&&(u[0].style.top="0px",u[0].style.left=n(t("Left",u[0])),c.push(u[0]));for(var f=1;f<u.length;f++){var m=u[f-1],d=u[f];if(!(r(m)+l(d)<=l(e)))break;d.style.top=m.style.top,d.style.left=n(r(m)+t("Left",d)),c.push(d)}for(;f<u.length;f++){i(c);d=u[f];var p=c.pop();d.style.top=n(a(p)+t("Top",d)),d.style.left=n(o(p)),c.push(d)}i(c);var y=c[0];e.style.height=n(a(y)+t("Bottom",y));var g=l(e);window.addEventListener?window.addEventListener("resize",s):document.body.onresize=s}var percentFlag=!1;function essayScroll(){const e=(document.documentElement.scrollTop||window.pageYOffset)%document.documentElement.clientHeight;result<=99||(result=99),!percentFlag&&e+100>=document.documentElement.clientHeight&&document.querySelector("#waterfall")?setTimeout((()=>{waterfall("#waterfall")}),500):setTimeout((()=>{document.querySelector("#waterfall")&&waterfall("#waterfall")}),500);const t=window.scrollY+document.documentElement.clientHeight;let n=document.getElementById("post-comment")||document.getElementById("footer");(n.offsetTop+n.offsetHeight/2<t||90<result)&&(percentFlag=!0)}function replaceAll(e,t,n){return e.split(t).join(n)}var anzhiyu={diffDate:function(e,t=!1){const n=new Date,o=new Date(e),l=n.getTime()-o.getTime(),a=36e5,r=24*a;let i;if(t){const e=l/r,t=l/a,n=l/6e4;i=l/2592e6>=1?o.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.day:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.hour:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else i=parseInt(l/r);return i},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=anzhiyu.diffDate(n,!0),t.style.display="inline"}))},reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},commentText:function(e){"undefined"!=e&&"null"!=e||(e="好棒！");var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");if(t){n.initEvent("input",!0,!0);var o=replaceAll(e,"\n","\n> ");t.value="> "+o+"\n\n",t.dispatchEvent(n);var l=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,l-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}},initIndexEssay:function(){setTimeout((()=>{let e=new Swiper(".essay_bar_swiper_container",{passiveListeners:!0,direction:"vertical",loop:!0,autoplay:{disableOnInteraction:!0,delay:3e3},mousewheel:!0}),t=document.getElementById("bbtalk");null!==t&&(t.onmouseenter=function(){e.autoplay.stop()},t.onmouseleave=function(){e.autoplay.start()})}),100)}};anzhiyu.initIndexEssay(),anzhiyu.changeTimeInEssay(),anzhiyu.reflashEssayWaterFall();