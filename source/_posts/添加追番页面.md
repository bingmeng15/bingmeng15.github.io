---
title: 添加追番页面
tags: butterfly
categories: 魔改教程
cover: https://img.paulzzh.com/touhou/konachan/jpeg/1de2bbd54eed268fe5e60eb2ade0f796.jpg
abbrlink: cc06
date: 2022-12-10 16:17:59
---

转自：

{% link hclonely Blog,https://blog.hclonely.com/posts/8422e92e, https://p3.music.126.net/5ErsmSshTKt5AKrXWUuqvw==/528865136464112.jpg?param=300y300 %}

## 安装插件

```
npm install hexo-bilibili-bangumi --save
```

## 配置文件

{% note default simple %}将下面的配置写入主题的配置文件`_config.yml`下(不是主题的配置文件){% endnote %}

```
bangumi: # 追番设置
  enable: true
  source: bili
  path:
  vmid:
  title: '追番列表'
  quote: '生命不息，追番不止！'
  show: 1
  loading:
  metaColor:
  color:
  webp:
  progress:
```

## 参数释义

| 参数      | 释义                                                         |
| --------- | ------------------------------------------------------------ |
| enable    | 是否启用                                                     |
| source    | 据源，仅支持番剧，bili：哔哩哔哩源；bgm：Bangumi源           |
| path      | 默认bangumis/index.html,cinemas/index.html                   |
| vmid      | 哔哩哔哩的vmid(uid)                                          |
| title     | 该页面的标题                                                 |
| quote     | 写在页面开头的一段话，支持 html 语法，可留空                 |
| show      | 初始显示页面：0: 想看,1: 在看,2: 看过，默认为1               |
| loading   | 图片加载完成前的 loading 图片                                |
| metaColor | meta 部分(简介上方)字体颜色                                  |
| color     | 简介字体颜色                                                 |
| webp      | 番剧封面使用webp格式(此格式在safari浏览器下不显示，但是图片大小可以缩小 100 倍左右), 默认true |
| progress  | 获取番剧数据时是否显示进度条，默认true                       |


在主题配置文件导航栏添加追番选项（自行自定义位置）。

```
menu:
   主页: / || fas fa-home
   文章||fas fa-list:
     归档: /archives/ || fas fa-archive
     标签: /tags/ || fas fa-tags
     分类: /categories/ || fas fa-folder-open
+   追番: /bangumis/ || fas fa-archive
   列表||fas fa-list:
     音乐: /music/ || fas fa-music
     电影: /movies/ || fas fa-video
     友链: /link/ || fas fa-link
     关于: /about/ || fas fa-heart
```

## 登录b站

1. 登录自己的b站，把自己的追番列表设置为公开。
2. 登录后找到自己的追番列表 https://space.bilibili.com/，在网址最后一串数字就是vmid。
3. 在hexo generate或hexo deploy之前使用h`exo bangumi -u`命令更新追番数据，使用`hexo cinema -u`命令更新追剧数据！
4. 删除数据命令:`hexo bangumi -d`和`hexo cinema -d`（也可以手动删除）。


## 手动添加追剧

{% note green no-icon %}
有一些番剧在b站是没有版权或者已下架，如果你想在hexo中显示，这就需要手动添加番剧。
在`sources/_data/`目录下创建文件，命名为`extra_bangumis.json`(追番数据)或`extra_cinemas.json`(追剧数据) ，并添加以如下内容:
{% endnote %}

```
{
  "watchedExtra": [
    {
      "title": "缘之空",
      "type": "番剧",
      "area": "日本",
      "cover": "https://cdn.jsdelivr.net/gh/mmdjiji/bangumis@main/Yosuga-no-Sora/cover.jpg",
      "totalCount": "全12话",
      "id": 0,
      "follow": "不可用",
      "view": "不可用",
      "danmaku": "不可用",
      "coin": "不可用",
      "score": "不可用",
      "des": "远离都市的田园小镇，奥木染。春日野悠带着妹妹穹，来到了这座城镇。坐落在这里的是，儿时暑假经常造访的充满回忆的已故祖父的家。双亲因意外事故而丧生，变得无依无靠..."
    }
  ]
}
```

三连看效果


